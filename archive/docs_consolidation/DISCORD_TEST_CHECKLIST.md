# Discord 自発発言システム テストチェックリスト

## 🔧 事前準備
- [ ] システム起動: `python3 main.py`
- [ ] 全ボットの正常起動確認（Reception + Spectra + LynQ + Paz）
- [ ] ログでSimplifiedAutonomousSpeechSystem初期化確認

## ⏰ フェーズ別テスト

### 1. REST期間テスト (00:00-06:59)
- [ ] **自発発言**: 完全に停止している
- [ ] **ユーザー応答**: 通常通り動作（メンション・通常発言）
- [ ] **ログ確認**: "現在のフェーズ rest では自発発言無効"

### 2. MEETING期間テスト (07:00-19:59)
- [ ] **自発発言**: lounge以外（command_center, development, creation）で発生
- [ ] **loungeチェック**: loungeで自発発言が発生しない
- [ ] **ユーザー応答**: 全チャンネルで通常動作

### 3. CONCLUSION期間テスト (20:00-23:59)  
- [ ] **自発発言**: loungeのみで発生
- [ ] **他チャンネル**: command_center, development, creationで自発発言なし
- [ ] **ユーザー応答**: 全チャンネルで通常動作

## 🤖 エージェント頻度テスト

### development チャンネル
- [ ] **LynQ優位**: 複数回観察してLynQが約50%で選択される
- [ ] **他エージェント**: Spectra・Pazも選択される（25%程度）

### creation チャンネル  
- [ ] **Paz優位**: 複数回観察してPazが約50%で選択される
- [ ] **他エージェント**: Spectra・LynQも選択される（25%程度）

### command_center チャンネル
- [ ] **比較的均等**: 全エージェントが選択される

## ⚙️ システム機能テスト

### 10秒ルール
- [ ] **連続投稿なし**: 自発発言間隔が10秒以上空いている
- [ ] **ユーザー発言不干渉**: ユーザー発言直後でも10秒後に自発発言可能

### 会話中断回避
- [ ] **アクティブ判定**: ユーザー発言後、そのチャンネルの自発発言が一時停止
- [ ] **他チャンネル継続**: 他チャンネルでは自発発言継続

### 環境別確率
- [ ] **テスト環境**: ENVIRONMENT=test で100%確率（10秒間隔）
- [ ] **本番環境**: ENVIRONMENT=production で33%確率（5分間隔）

## 📝 ログ確認項目

### 正常ログ
- [ ] `🚀 SimplifiedAutonomousSpeechSystem 開始`
- [ ] `🔄 Simplified autonomous speech loop started`
- [ ] `🎙️ 簡素化版自発発言: [agent] -> #[channel]`

### 制御ログ
- [ ] `🚫 現在のフェーズ [phase] では自発発言無効`
- [ ] `🎲 確率判定失敗: XX%`
- [ ] `🚫 10秒ルール: まだ前回から10秒経過していません`
- [ ] `💬 利用可能なチャンネルがありません`

## 🚨 エラーチェック

### 起動エラー
- [ ] **ImportError なし**: SimplifiedAutonomousSpeechSystemのインポート成功
- [ ] **AttributeError なし**: メソッド呼び出し成功
- [ ] **TypeError なし**: 引数の型エラーなし

### 実行時エラー  
- [ ] **KeyError なし**: 設定値アクセス成功
- [ ] **FileNotFoundError 対応**: message_queue.json未存在時の正常処理
- [ ] **JSON エラー対応**: 破損ファイルからの回復

## 📊 パフォーマンス確認

### メモリ・CPU
- [ ] **メモリリーク なし**: 長時間実行での安定性
- [ ] **CPU使用率**: 過度な負荷なし
- [ ] **ファイルディスクリプタ**: リーク なし

### Discord API
- [ ] **レート制限 遵守**: API制限内での動作
- [ ] **接続安定性**: 切断・再接続の適切な処理

## ✅ 合格基準

### 必須項目 (全て必要)
- [ ] フェーズ別制御が100%正確に動作
- [ ] エージェント頻度優先度が統計的に正しい（±10%）
- [ ] 10秒ルールが確実に守られる
- [ ] エラーログがない（DEBUGログ除く）

### 推奨項目 (80%以上)  
- [ ] 会話中断回避の適切な動作
- [ ] 環境別確率の正確性
- [ ] ログメッセージの理解しやすさ

## 🔧 トラブルシューティング

### よくある問題
1. **自発発言が発生しない**
   - フェーズ確認: ログで現在フェーズをチェック
   - 確率確認: テスト環境（100%）で試す
   - 10秒ルール: 前回発言からの時間をチェック

2. **想定外チャンネルでの発言**
   - フェーズ設定確認: phase_settings の内容
   - 時刻確認: サーバー時刻と期待時間の一致

3. **エージェント選択の偏り**
   - サンプル数確認: 統計的に十分な観察回数
   - チャンネル確認: 正しいチャンネルでのテスト

## 📋 テスト記録

### 実行日時
- **開始**: ____年__月__日 __:__
- **終了**: ____年__月__日 __:__

### テスト結果
- **合格項目**: ___/30
- **エラー件数**: ___件
- **総合判定**: ✅PASS / ❌FAIL

### 備考
```
[テスト中に発見した問題や特記事項を記載]
```